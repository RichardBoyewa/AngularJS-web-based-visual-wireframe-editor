config.tools={addGuide:{id:"addGuide",isDefault:!1,isActive:!1,launcher:"menu_view",horizontal:{mousedown:function(e){e.scope.data.tools.addGuide.isActive="horizontal",console.log("hor md")},mouseup:function(e){console.log("hor mu");var t=e.scope.data;t.tools.addGuide.isActive=!1}},vertical:{mousedown:function(e){e.scope.data.tools.addGuide.isActive="vertical",console.log("ver md")},mouseup:function(e){e.scope.data.tools.addGuide.isActive=!1,console.log("ver mu")}}},drawBox:{cursor:"crosshair",id:"drawBox",isDefault:!0,isActive:!1,launcher:"toolbar",label:"Draw Box",iconClass:"fa fa-square-o",isMoving:!1,isDrawing:!1,optionsTemplate:"",element:null,config:null,resetConfig:function(e){e.data.tools.drawBox.config={areaClass:"draw-box",areaStyle:$.extend({left:"-10000px",top:"-10000px",width:"0",height:"0",lPx:-1e4,tPx:-1e4,wPx:0,hPx:0},e.data.drawStyle)}},init:function(e,t){var o=t.data,a=o.tools.drawBox;a.resetConfig(t);var s='<div id="drawBoxBox" ng-class="data.tools.drawBox.config.areaClass" ng-style="data.tools.drawBox.config.areaStyle"></div>',l=e(s)(t),n=e(a.optionsTemplate)(t);$("#canvas").append(l),a.element=l,a.optionsMenu=n,o.flags.elementState="normal",o.flags.screenState="base"},destroy:function(e){var t=e.data.tools.drawBox;t.resetConfig(e),t.element&&(t.element.remove(),t.optionsMenu.remove())},setUndo:function(){},mousedown:function(e){e.scope.data.tools.drawBox.clickTouch(e)},touchstart:function(e){e.scope.data.tools.drawBox.clickTouch(e)},clickTouch:function(e){e.scope.data.tools.drawBox.resetConfig(e.scope);var t=e.scope.data,o=t.tools.drawBox.config,a=e.event,s=$("#canvas"),l=(2==t.selection.active.typeNum?t.fn.tree.selectParentLayer(t.tree.root.children):t.selection.active).locked;l===!1&&e.scope.$apply(function(){if(a.target==s[0])o.areaStyle.left=t.mouse.offset.down.x+"px",o.areaStyle.lPx=t.mouse.offset.down.x,o.areaStyle.top=t.mouse.offset.down.y+"px",o.areaStyle.tPx=t.mouse.offset.down.y,o.initPos={lPx:t.mouse.offset.down.x,tPx:t.mouse.offset.down.y},o.areaStyle.width=0,o.areaStyle.wPx=0,o.areaStyle.height=0,o.areaStyle.hPx=0,t.tools.drawBox.isDrawing=!0;else if("workarea"==a.target.id){var e=s.offset(),l=t.mouse.down.x-e.left,n=t.mouse.down.y-e.top,i=t.screen.wPx,r=t.screen.hPx,c=t.screen.overflow?l:l>0?l:0,d=t.screen.overflow?n:n>0?n:0;t.screen.overflow||(c=Math.floor(c>i?i:c),d=Math.floor(d>r?r:d)),o.areaStyle.left=c+"px",o.areaStyle.lPx=c,o.areaStyle.top=d+"px",o.areaStyle.tPx=d,o.initPos={lPx:c,tPx:d},o.areaStyle.width=0,o.areaStyle.wPx=0,o.areaStyle.height=0,o.areaStyle.hPx=0,t.tools.drawBox.isDrawing=!0}else"drawBoxBox"==a.target.id&&(t.tools.drawBox.isMoving=!0)})},mouseup:function(e){e.scope.data.tools.drawBox.isMoving=!1,e.scope.data.tools.drawBox.finishSelect(e)},touchend:function(e){e.scope.data.tools.drawBox.isMoving=!1,e.scope.data.tools.drawBox.finishSelect(e)},mouseleave:function(){},finishSelect:function(e){var t=(e.event,e.scope.data),o=t.tools.drawBox,a="mousedown"==t.flags.mouseEvent||"touchstart"==t.flags.mouseEvent?!0:!1,s=(2==t.selection.active.typeNum?t.fn.tree.selectParentLayer(t.tree.root.children):t.selection.active).locked;if(!o.isMoving&&!a&&s===!1&&o.isDrawing){if(o.config.areaStyle.wPx>0&&o.config.areaStyle.hPx>0){var l=e.scope.data.fn.tree.returnSelected(t.tree.root.children);t.config.allowNestedElements||(l="layer"==l.type?l:e.scope.data.fn.tree.selectParentLayer(e.scope.data.tree.root.children),e.scope.data.fn.tree.toggleSelected({child:l,data:e.scope.data}));var n=t.fn.calculateOffset(t,l,o.config.areaStyle);l.children.push({id:t.fn.tree.newLayerName({pre:e.scope.data.lang[e.scope.data.lang.act].element,data:e.scope.data}),type:"element",cursorClass:"",locked:!1,visible:!0,typeNum:2,children:[],styles:{base:{normal:$.extend({position:"absolute",left:n.left,lPx:n.lPx,top:n.top,tPx:n.tPx,width:o.config.areaStyle.width,wPx:o.config.areaStyle.wPx,height:o.config.areaStyle.height,hPx:o.config.areaStyle.hPx,overflow:"hidden","white-space":"pre-wrap",opacity:1,"mix-blend-mode":"normal"},t.drawStyle)}}})}o.isDrawing=!1,o.resetConfig(e.scope)}},mouseenter:function(e){e.scope.data.tools.drawBox.finishSelect(e)},mousemove:function(e,t){t.data.tools.drawBox.move(e,t)},touchmove:function(e,t){t.data.tools.drawBox.move(e,t)},move:function(e,t){var o="mousedown"==t.data.flags.mouseEvent||"touchstart"==t.data.flags.mouseEvent?!0:!1,a=(2==t.data.selection.active.typeNum?t.data.fn.tree.selectParentLayer(t.data.tree.root.children):t.data.selection.active).locked;if(o&&a===!1){var s=$("#canvas"),l=t.data,n=l.tools.drawBox.config,i=s.offset(),r=l.mouse.x-i.left,c=l.mouse.y-i.top,d=l.screen.wPx,g=l.screen.hPx,f=l.screen.overflow?r:r>0?r:0,u=l.screen.overflow?c:c>0?c:0;f=Math.floor(l.screen.overflow?f:f>d?d:f),u=Math.floor(l.screen.overflow?u:u>g?g:u);var w=n.initPos.lPx<f?n.initPos.lPx:f,m=n.initPos.tPx<u?n.initPos.tPx:u,I=Math.floor(n.initPos.lPx<f?f-n.initPos.lPx:n.initPos.lPx-f),C=Math.floor(n.initPos.tPx<u?u-n.initPos.tPx:n.initPos.tPx-u);t.$apply(function(){n.areaStyle.lPx=w,n.areaStyle.left=w+"px",n.areaStyle.tPx=m,n.areaStyle.top=m+"px",n.areaStyle.wPx=I,n.areaStyle.width=I+"px",n.areaStyle.hPx=C,n.areaStyle.height=C+"px"})}}},selection:{cursor:"",id:"selection",isDefault:!1,isActive:!1,launcher:"toolbar",label:"Select Element",iconClass:"fa fa-mouse-pointer",optionsTemplate:"",element:null,init:function(){$("#canvas,#guides").hide()},destroy:function(){$("#canvas,#guides").show()},setUndo:function(){},down:function(e){var t=e.scope,o=e.event,a=(e.compile,t.data.tools.selection),s=t.data.flags.elementState,l=t.data.flags.screenState,n=t.data.fn.modifiers.getStyle;if(a.element=t.data.fn.tree.searchElementById($(o.target).attr("ob-id"),t.data.tree.root.children),a.element){a.eInitPos={lPx:n(a.element,l,s,"lPx",!0),tPx:n(a.element,l,s,"tPx",!0),wPx:n(a.element,l,s,"wPx",!0),hPx:n(a.element,l,s,"hPx",!0)};var i=2==a.element.typeNum&&t.data.fn.tree.selectParentLayer(t.data.tree.root.children).locked?!0:!1;a.element.locked===!1&&i===!1&&(t.data.fn.tree.toggleSelected({child:a.element,data:t.data}),t.data.flags.resizeLeft=o.offsetX<5?!0:!1,t.data.flags.resizeTop=o.offsetY<5?!0:!1,t.data.flags.resizeRight=o.offsetX>a.element.styles[l][s].wPx-5?!0:!1,t.data.flags.resizeBottom=o.offsetY>a.element.styles[l][s].hPx-5?!0:!1)}else{var r=t.data.fn.tree.selectParentLayer(t.data.tree.root.children);t.data.fn.tree.toggleSelected({child:r,data:t.data})}t.$apply()},mousedown:function(e){e.scope.data.tools.selection.down(e)},touchstart:function(e){e.scope.data.tools.selection.down(e)},mouseup:function(e){"$apply"!=e.scope.$root.$$phase&&"$digest"!=e.scope.$root.$$phase&&e.scope.$apply()},touchend:function(){},mouseleave:function(e){e.scope.data.tools.selection.element&&(e.scope.data.tools.selection.element.cursorClass="")},finishSelect:function(){},mouseenter:function(){},move:function(e,t){var o=t.data,a=o.flags,s=o.tools.selection.element,l="",n="mousedown"==o.flags.mouseEvent||"touchstart"==o.flags.mouseEvent?!0:!1,i=(o.tools.selection,o.flags.elementState),r=o.flags.screenState,c=o.fn.modifiers.getStyle,d=s?2==s.typeNum&&o.fn.tree.selectParentLayer(o.tree.root.children).locked?!0:!1:null;if(s&&2==s.typeNum&&!n&&(e.offsetY<5&&(l+="n"),e.offsetY>c(s,r,i,"hPx",!0)-5&&(l+="s"),e.offsetX<5&&(l+="w"),e.offsetX>c(s,r,i,"wPx",!0)-5&&(l+="e"),s.cursorClass=l),s&&s.locked===!1&&d===!1&&2==s.typeNum&&n){{c(s,r,i,"lPx",!0),c(s,r,i,"tPx",!0)}a.resizeLeft||a.resizeTop||a.resizeRight||a.resizeBottom?(a.resizeLeft&&(o.fn.modifiers.setElementArea(t,"left"),o.fn.modifiers.setElementArea(t,"width",!0)),a.resizeTop&&(o.fn.modifiers.setElementArea(t,"top"),o.fn.modifiers.setElementArea(t,"height",!0)),a.resizeRight&&o.fn.modifiers.setElementArea(t,"width"),a.resizeBottom&&o.fn.modifiers.setElementArea(t,"height")):(o.fn.modifiers.setElementArea(t,"left"),o.fn.modifiers.setElementArea(t,"top"))}},mousemove:function(e,t){t.data.tools.selection.move(e,t)},touchmove:function(e,t){t.data.tools.selection.move(e,t)}},eyedropper:{cursor:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgdmlld0JveD0iMCAwIDE2IDE2IgogICBoZWlnaHQ9IjE2IgogICB3aWR0aD0iMTYiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlkPSJzdmcyIgogICB2ZXJzaW9uPSIxLjEiPjxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTgiPjxyZGY6UkRGPjxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+PC9jYzpXb3JrPjwvcmRmOlJERj48L21ldGFkYXRhPjxkZWZzCiAgICAgaWQ9ImRlZnM2Ij48Y2xpcFBhdGgKICAgICAgIGlkPSJjbGlwUGF0aDE4IgogICAgICAgY2xpcFBhdGhVbml0cz0idXNlclNwYWNlT25Vc2UiPjxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTYiCiAgICAgICAgIGQ9Ik0gMCwxMiBIIDEyIFYgMCBIIDAgWiIgLz48L2NsaXBQYXRoPjwvZGVmcz48ZwogICAgIHRyYW5zZm9ybT0ibWF0cml4KDEuMzMzMzMzMywwLDAsLTEuMzMzMzMzMywwLDE2KSIKICAgICBpZD0iZzEwIj48ZwogICAgICAgaWQ9ImcxMiI+PGcKICAgICAgICAgY2xpcC1wYXRoPSJ1cmwoI2NsaXBQYXRoMTgpIgogICAgICAgICBpZD0iZzE0Ij48ZwogICAgICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuODUzNSwxMikiCiAgICAgICAgICAgaWQ9ImcyMCI+PHBhdGgKICAgICAgICAgICAgIGlkPSJwYXRoMjIiCiAgICAgICAgICAgICBzdHlsZT0iZmlsbDojMzczNTM1O2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICAgICAgZD0ibSAwLDAgYyAwLjU5MiwwIDEuMDk4LC0wLjIxIDEuNTE3LC0wLjYyOSAwLjQyLC0wLjQyIDAuNjI5LC0wLjkyNiAwLjYyOSwtMS41MTcgMCwtMC41OTIgLTAuMjA5LC0xLjA5NSAtMC42MjksLTEuNTEgTCAwLjAxMSwtNS4xNDkgMC43MDcsLTUuODQ2IEMgMC43NTIsLTUuODkxIDAuNzczLC01Ljk0MiAwLjc3MywtNiBjIDAsLTAuMDU4IC0wLjAyMSwtMC4xMDkgLTAuMDY2LC0wLjE1NCBsIC0xLjQwNiwtMS40MDcgYyAtMC4wNDUsLTAuMDQ0IC0wLjA5NiwtMC4wNjYgLTAuMTU1LC0wLjA2NiAtMC4wNTgsMCAtMC4xMDksMC4wMjIgLTAuMTU0LDAuMDY2IGwgLTAuNzAzLDAuNzA0IC00LjAzOCwtNC4wMzkgYyAtMC4xNjUsLTAuMTY0IC0wLjM2NiwtMC4yNDcgLTAuNjAzLC0wLjI0NyBIIC03LjcxMSBMIC05LjQyNSwtMTIgbCAtMC40MjksMC40MjkgMC44NTgsMS43MTQgdiAxLjM1OSBjIDAsMC4yMzYgMC4wODIsMC40MzggMC4yNDcsMC42MDIgbCA0LjAzOCw0LjAzOSAtMC43MDMsMC43MDMgQyAtNS40NTgsLTMuMTA5IC01LjQ4LC0zLjA1OSAtNS40OCwtMyBjIDAsMC4wNTkgMC4wMjIsMC4xMDkgMC4wNjYsMC4xNTQgbCAxLjQwNiwxLjQwNyBjIDAuMDQ1LDAuMDQ0IDAuMDk2LDAuMDY2IDAuMTU0LDAuMDY2IDAuMDU5LDAgMC4xMSwtMC4wMjIgMC4xNTUsLTAuMDY2IGwgMC42OTYsLTAuNjk4IDEuNDkzLDEuNTA4IEMgLTEuMDk1LC0wLjIxIC0wLjU5MiwwIDAsMCIgLz48L2c+PGcKICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzLjQyODcsMi4xNDI2KSIKICAgICAgICAgICBpZD0iZzI0Ij48cGF0aAogICAgICAgICAgICAgaWQ9InBhdGgyNiIKICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgICAgICBkPSJNIDAsMCAzLjg1NywzLjg1NyAyLjU3MSw1LjE0MyAtMS4yODYsMS4yODYgViAwIFoiIC8+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==) 0 12, auto",id:"eyedropper",isDefault:!1,isActive:!1,launcher:"toolbar",label:"Eyedropper",iconClass:"fa fa-eyedropper",optionsTemplate:"",element:null,init:function(){$("#canvas,#guides").hide()},destroy:function(){$("#canvas,#guides").show()},setUndo:function(){},down:function(e){var t=e.scope,o=e.event,a=(e.compile,t.data.tools.eyedropper),s=t.data.flags.elementState,l=t.data.flags.screenState;if(a.element=t.data.fn.tree.searchElementById($(o.target).attr("ob-id"),t.data.tree.root.children),2==a.element.typeNum){var n=angular.extend({},a.element.styles[l][s]);delete n.hPx,delete n.height,delete n.lPx,delete n.left,delete n.position,delete n.tPx,delete n.top,delete n.wPx,delete n.width,console.log(n),2==t.data.selection.active.typeNum?t.data.selection.active.styles[l][s]=angular.extend({},t.data.selection.active.styles[l][s],n):(t.data.drawStyle["background-color"]=n["background-color"],t.data.drawStyle["border-color"]=n["border-color"],t.data.drawStyle["border-style"]=n["border-style"],t.data.drawStyle["border-width"]=n["border-width"])}},mousedown:function(e){e.scope.data.tools.eyedropper.down(e)},touchstart:function(e){e.scope.data.tools.eyedropper.down(e)},mouseup:function(){},touchend:function(){},mouseleave:function(){},finishSelect:function(){},mouseenter:function(){},mousemove:function(){},touchmove:function(){}}};